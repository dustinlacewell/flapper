---
menu_label: Overview
sidebar_position: 2
---

## How does Flapper work?

There are a few major concepts in Flapper:

-   **Assets**: Javascript objects that hold whatever data is useful to you
-   **Asset Types**: A collection of Assets that have the same structure
-   **Proccesor**: A function which updates Asset data
-   **Pipeline**: A series of Processors which build the Assets of an Asset Type
-   **Stage**: A way to name a group of Pipelines to control ordering of the build

Instead of offering built-in metaphors like "pages", "posts", "categories" and "tags", Flapper lets you design whatever works for your site.

We'll go over each of these concepts in detail now.

### Assets and Asset Types

Assets are plain ol javascript objects, with whatever data is useful.

Assets represent the individual items within some group of similar assets. These could represent static pages of your site, posts of a blog, but also software projects, your favorite movies, and whatever else.

What data assets should have really comes down to what you want to display on your site, via your templates, and what data is needed to drive them.

**Important Properties:**

Assets have a few important properties:

-   **target**: The path on disk / relative url of the Asset
-   **id**: Automatically generated globally unique identifier
-   **type**: Name of the Asset Type to which the Asset belongs

**Asset Types:**

Asset Types are simply named collections of similar Assets.

### Processors

Plain ol javascript functions, that modify Assets in whatever way is useful.

Processors are responsible for providing the initial data for Assets, and adding any computed data they need.

Need to convert a title into a slug? Need to associate an asset with other "related" assets? Whatever processing of an Asset's data you need to do, you'll do it within a Processor function.

### Pipelines and Stages

Pipelines are where you define an Asset Type and the series of Processors that will build its Assets. Each Pipeline is an array of Processors. Each Stage is an object mapping named Pipelines. Multiple Stages are composed by name into a final parent object.

<Code language="javascript">
    {`const stages = {
    'reading-stage': {
        'your-asset-name': [
            GetDataFromSource( ... ),
            AddTitle( ... ),
            SetURL( ... )
        ],
        'your-second-asset': [
            ProcedurallyGenerateData( ... ),
            DoCleverThing( ... ),
            SetURL( ... ),
        ],
    },
    'writing-stage': {
        'your-asset-name': [
            RenderTemplate( ... ),
        ],
        'your-second-asset': [
            RenderTemplate( ... ),
        ],
    },
}`}
</Code>

Stages and Pipelines are executed in the order they are defined. This structure defines the entire build process and allows for precise control over ordering where needed.

There can be multiple Pipelines for the same Asset Type. In the example above, both Asset Types appear in both Stages. The Assets generated in the first stage carry over to the second.

A good reason to use Stages to organize the ordering like this, is to ensure that all assets have received a URL by the time that template rendering happens. This guarantees that templates can render links to the Assets of any Asset Type.

## Gatsby Integration

Flapper implements the <Link to="https://www.gatsbyjs.com/docs/reference/config-files/gatsby-node/#createPages">createPages</Link> Gatsby API. This means that, during Gatsby's build process, when it is ready to render out pages, that is when Flappy jumps into action.

Flappy runs your build plan and at some point you should use the `RenderTemplate` processor to turn your Assets into static HTML pages. Internally, `RenderTemplate` uses the Gatsby <Link to="https://www.gatsbyjs.com/docs/reference/config-files/actions/#createPage">createPage</Link> method.

You can read more about this approach here: <Link to="https://www.gatsbyjs.com/docs/how-to/querying-data/using-gatsby-without-graphql/">Gatsby without GraphQL</Link>
